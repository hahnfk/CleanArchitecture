<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- =======================
         COLOR PALETTE
         ======================= -->
    <!-- Colors -->
    <Color x:Key="ClrPrimary">#3B82F6</Color>
    <Color x:Key="ClrPrimaryHover">#2563EB</Color>
    <Color x:Key="ClrAccent">#22C55E</Color>
    <Color x:Key="ClrDanger">#EF4444</Color>
    <Color x:Key="ClrBorder">#DDDDDD</Color>
    <Color x:Key="ClrRowAlt">#FAFAFA</Color>
    <Color x:Key="ClrRowHover">#F3F4F6</Color>
    <Color x:Key="ClrMutedText">#666666</Color>

    <!-- Brushes (built from colors) -->
    <SolidColorBrush x:Key="ClrPrimaryBrush"       Color="{StaticResource ClrPrimary}"/>
    <SolidColorBrush x:Key="ClrPrimaryHoverBrush"  Color="{StaticResource ClrPrimaryHover}"/>
    <SolidColorBrush x:Key="ClrAccentBrush"        Color="{StaticResource ClrAccent}"/>
    <SolidColorBrush x:Key="ClrDangerBrush"        Color="{StaticResource ClrDanger}"/>
    <SolidColorBrush x:Key="ClrBorderBrush"        Color="{StaticResource ClrBorder}"/>
    <SolidColorBrush x:Key="ClrRowAltBrush"        Color="{StaticResource ClrRowAlt}"/>
    <SolidColorBrush x:Key="ClrRowHoverBrush"      Color="{StaticResource ClrRowHover}"/>
    <SolidColorBrush x:Key="ClrMutedTextBrush"     Color="{StaticResource ClrMutedText}"/>

    <!-- =======================
         BUTTON STYLE
         ======================= -->
    <Style TargetType="Button">
        <Setter Property="Margin" Value="4,0,0,0"/>
        <Setter Property="Padding" Value="10,6"/>
        <Setter Property="MinWidth" Value="72"/>
        <Setter Property="Background" Value="{StaticResource ClrPrimaryBrush}"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="BorderBrush" Value="{StaticResource ClrPrimaryBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="Bd"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="6">
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Margin="{TemplateBinding Padding}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="{StaticResource ClrPrimaryHoverBrush}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource ClrPrimaryHoverBrush}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Bd" Property="Opacity" Value="0.5"/>
                            <Setter Property="Cursor" Value="Arrow"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Secondary (neutral) -->
    <Style x:Key="Button.Secondary" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
        <Setter Property="Background" Value="#EEEEEE"/>
        <Setter Property="Foreground" Value="Black"/>
        <Setter Property="BorderBrush" Value="#E0E0E0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="Bd" Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="6">
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          Margin="{TemplateBinding Padding}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bd" Property="Background" Value="#E5E5E5"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Bd" Property="Opacity" Value="0.5"/>
                            <Setter Property="Cursor" Value="Arrow"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Danger -->
    <Style x:Key="Button.Danger" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
        <Setter Property="Background" Value="{StaticResource ClrDangerBrush}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ClrDangerBrush}"/>
    </Style>

    <!-- =======================
         TEXTBOX STYLE
         ======================= -->
    <Style TargetType="TextBox">
        <Setter Property="Padding" Value="6"/>
        <Setter Property="BorderBrush" Value="{StaticResource ClrBorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Border x:Name="Bd"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Background="{TemplateBinding Background}">
                        <ScrollViewer x:Name="PART_ContentHost"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Bd" Property="Opacity" Value="0.6"/>
                        </Trigger>
                        <Trigger Property="IsKeyboardFocusWithin" Value="True">
                            <Setter TargetName="Bd" Property="BorderBrush" Value="{StaticResource ClrPrimaryBrush}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- =======================
         CHECKBOX AS "RADIO-LIKE"
         ======================= -->
    <Style x:Key="Toggle.RadioLook" TargetType="CheckBox">
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="CheckBox">
                    <Grid>
                        <!-- Circle outline -->
                        <Ellipse x:Name="Ring" Width="18" Height="18"
                                 Stroke="#888" StrokeThickness="2" Fill="Transparent"/>
                        <!-- Filled dot -->
                        <Ellipse x:Name="Dot"
                                 Width="10" Height="10"
                                 Fill="{StaticResource ClrAccentBrush}"
                                 Visibility="Collapsed"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="Ring" Property="Stroke" Value="{StaticResource ClrAccentBrush}"/>
                            <Setter TargetName="Dot" Property="Visibility" Value="Visible"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Ring" Property="Opacity" Value="0.5"/>
                            <Setter TargetName="Dot" Property="Opacity" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- =======================
         LISTVIEW & ROW STYLING
         ======================= -->
    <Style TargetType="{x:Type ListView}">
        <Setter Property="BorderBrush" Value="{StaticResource ClrBorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="AlternationCount" Value="2"/>
    </Style>

    <Style TargetType="{x:Type GridViewColumnHeader}">
        <Setter Property="FontWeight" Value="SemiBold"/>
        <Setter Property="Background" Value="#F5F5F5"/>
        <Setter Property="BorderBrush" Value="{StaticResource ClrBorderBrush}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="Padding" Value="6,8"/>
    </Style>

    <!-- Row container: alternate background + hover + completed look -->
    <Style TargetType="{x:Type ListViewItem}">
        <Setter Property="Padding" Value="4"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="BorderBrush" Value="{StaticResource ClrBorderBrush}"/>
        <Setter Property="Background" Value="White"/>
        <Style.Triggers>
            <Trigger Property="ItemsControl.AlternationIndex" Value="1">
                <Setter Property="Background" Value="{StaticResource ClrRowAltBrush}"/>
            </Trigger>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{StaticResource ClrRowHoverBrush}"/>
            </Trigger>
            <!-- Dim + strikethrough when completed -->
            <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                <Setter Property="Opacity" Value="0.75"/>
                <Setter Property="Foreground" Value="{StaticResource ClrMutedTextBrush}"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <!-- Text style for strike-through on completed titles -->
    <Style x:Key="TitleTextBlock" TargetType="TextBlock">
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                <Setter Property="TextDecorations" Value="Strikethrough"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

<!-- ========= Cell button base styles (from earlier) ========= -->
<Style x:Key="CellButton" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
  <Setter Property="Padding" Value="8,4"/>
  <Setter Property="MinWidth" Value="0"/>
  <Setter Property="Margin" Value="4,0"/>
</Style>

<Style x:Key="CellButton.Danger" TargetType="Button" BasedOn="{StaticResource CellButton}">
  <Setter Property="Background"  Value="{StaticResource ClrDangerBrush}"/>
  <Setter Property="BorderBrush" Value="{StaticResource ClrDangerBrush}"/>
</Style>

<!-- ========= Visibility helper styles for row state ========= -->

<!-- Visible only when NOT editing AND NOT new (e.g., Edit / Delete) -->
<Style x:Key="CellButton.EditVisibleWhenNormal" TargetType="Button" BasedOn="{StaticResource CellButton}">
  <Setter Property="Visibility" Value="Collapsed"/>
  <Style.Triggers>
    <MultiDataTrigger>
      <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding IsEditing}" Value="False"/>
        <Condition Binding="{Binding IsNew}"     Value="False"/>
      </MultiDataTrigger.Conditions>
      <Setter Property="Visibility" Value="Visible"/>
    </MultiDataTrigger>
  </Style.Triggers>
</Style>

<Style x:Key="CellButton.DeleteVisibleWhenNormal" TargetType="Button" BasedOn="{StaticResource CellButton.Danger}">
  <Setter Property="Visibility" Value="Collapsed"/>
  <Style.Triggers>
    <MultiDataTrigger>
      <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding IsEditing}" Value="False"/>
        <Condition Binding="{Binding IsNew}"     Value="False"/>
      </MultiDataTrigger.Conditions>
      <Setter Property="Visibility" Value="Visible"/>
    </MultiDataTrigger>
  </Style.Triggers>
</Style>

<!-- Visible only when editing existing (IsEditing == true && IsNew == false): Save / Cancel -->
<Style x:Key="CellButton.VisibleWhenEditing" TargetType="Button" BasedOn="{StaticResource CellButton}">
  <Setter Property="Visibility" Value="Collapsed"/>
  <Style.Triggers>
    <MultiDataTrigger>
      <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding IsEditing}" Value="True"/>
        <Condition Binding="{Binding IsNew}"     Value="False"/>
      </MultiDataTrigger.Conditions>
      <Setter Property="Visibility" Value="Visible"/>
    </MultiDataTrigger>
  </Style.Triggers>
</Style>

<!-- Visible only for new inline rows (IsNew == true): Save New / Cancel New -->
<Style x:Key="CellButton.VisibleWhenNew" TargetType="Button" BasedOn="{StaticResource CellButton}">
  <Setter Property="Visibility" Value="Collapsed"/>
  <Style.Triggers>
    <DataTrigger Binding="{Binding IsNew}" Value="True">
      <Setter Property="Visibility" Value="Visible"/>
    </DataTrigger>
  </Style.Triggers>
</Style>

</ResourceDictionary>
